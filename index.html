<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة الكود العربي</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script src="scripts.js" defer></script>
</head>
<body>
    <header>
        <h1>مكتبة الكود العربي</h1>
        <nav>
            <button onclick="navigate('home')" class="nav-btn">الرئيسية</button>
            <button onclick="navigate('scripts')" class="nav-btn" id="publishButton" style="display:none;">نشر سكربت</button>
            <button onclick="navigate('contact')" class="nav-btn">اتصل بنا</button>
        </nav>
    </header>

    <!-- قسم الرئيسية -->
    <main id="home" class="content">
        <h2>مرحباً بك في مكتبة الكود العربي!</h2>
        <p>شارك أكوادك البرمجية بأمان واحترافية.</p>
    </main>

    <!-- قسم تسجيل الدخول -->
    <main id="login" class="content" style="display: none;">
        <h2>تسجيل الدخول</h2>
        <form id="loginForm">
            <input type="text" id="loginUsername" placeholder="اسم المستخدم" required>
            <input type="password" id="loginPassword" placeholder="كلمة المرور" required>
            <button type="submit" class="submit-btn">تسجيل الدخول</button>
        </form>
    </main>

    <!-- قسم نشر السكربت -->
    <main id="scripts" class="content" style="display: none;">
        <h2>نشر سكربت جديد</h2>
        <form id="scriptForm">
            <input type="text" id="scriptTitle" placeholder="عنوان السكربت" required>
            <textarea id="scriptContent" placeholder="أدخل السكربت هنا..." required></textarea>
            <input type="text" id="imageLink" placeholder="أدخل رابط الصورة هنا (اختياري)">
            <button type="submit" class="submit-btn">نشر السكربت</button>
        </form>
        <div id="scriptsList">
            <p id="noScriptsMsg">لا توجد سكربتات منشورة بعد.</p>
        </div>
        <div id="scriptImage" style="display: none;">
            <img id="imagePreview" src="" alt="صورة السكربت" width="200">
        </div>
    </main>

    <!-- قسم اتصل بنا -->
    <main id="contact" class="content" style="display: none;">
        <h2>تواصل معنا</h2>
        <p>
            <a href="https://instagram.com/ntlk.afan" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" width="30">
                ntlk.afan
            </a>
        </p>
    </main>

    <footer>
        <p>© 2025 مكتبة الكود العربي - جميع الحقوق محفوظة</p>
    </footer>

    <script>
        // بيانات مالك الموقع: يجب أن يكون لديك حساب باسم المستخدم وكلمة مرور معينة
        const ownerUsername = 'NTLKAFAN'; // اسم المستخدم الخاص بك
        const ownerPassword = 'yourpassword'; // كلمة المرور الخاصة بك

        // عندما يتم إرسال نموذج تسجيل الدخول
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;

            // تحقق من اسم المستخدم وكلمة المرور
            if (username === ownerUsername && password === ownerPassword) {
                localStorage.setItem('loggedIn', true); // تخزين حالة تسجيل الدخول
                localStorage.setItem('role', 'owner'); // تعيين صلاحيات مالك الموقع
                alert('تم تسجيل الدخول بنجاح!');
                document.getElementById('login').style.display = 'none';
                document.getElementById('scripts').style.display = 'block';
                document.getElementById('publishButton').style.display = 'inline-block'; // إظهار زر نشر السكربت
            } else {
                alert('اسم المستخدم أو كلمة المرور غير صحيحة!');
            }
        });

        // تحقق من حالة تسجيل الدخول عند تحميل الصفحة
        window.onload = function() {
            if (localStorage.getItem('loggedIn')) {
                const role = localStorage.getItem('role');
                if (role === 'owner') {
                    document.getElementById('publishButton').style.display = 'inline-block'; // إظهار زر نشر السكربت
                }
            } else {
                document.getElementById('login').style.display = 'block';
            }
        };

        // نشر السكربت فقط إذا كان المستخدم هو مالك الموقع
        document.getElementById('scriptForm').addEventListener('submit', function(event) {
            event.preventDefault();

            if (localStorage.getItem('role') === 'owner') {
                const imageLink = document.getElementById('imageLink').value;
                if (imageLink) {
                    const imageUrl = imageLink.includes('raw=true') ? imageLink : imageLink + '?raw=true';
                    document.getElementById('imagePreview').src = imageUrl;
                    document.getElementById('scriptImage').style.display = 'block';
                } else {
                    document.getElementById('scriptImage').style.display = 'none';
                }

                const scriptTitle = document.getElementById('scriptTitle').value;
                const scriptContent = document.getElementById('scriptContent').value;
                const scriptList = document.getElementById('scriptsList');

                const scriptDiv = document.createElement('div');
                scriptDiv.innerHTML = `<h3>${scriptTitle}</h3><p>${scriptContent}</p><button class="delete-btn" onclick="deleteScript('${scriptTitle}')">حذف السكربت</button>`;
                scriptList.appendChild(scriptDiv);
            } else {
                alert('أنت ضيف ولا يمكنك نشر السكربتات.');
            }

            document.getElementById('scriptForm').reset();
        });

        function deleteScript(title) {
            const scriptList = document.getElementById('scriptsList');
            const scripts = Array.from(scriptList.children);
            scripts.forEach(script => {
                if (script.querySelector('h3').innerText === title) {
                    script.remove();
                }
            });
        }
    </script>
</body>
</html>
