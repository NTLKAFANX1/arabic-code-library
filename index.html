<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة الكود العربي</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <script src="scripts.js" defer></script>
</head>
<body>
    <header>
        <h1>مكتبة الكود العربي</h1>
        <nav>
            <button onclick="navigate('home')" class="nav-btn">الرئيسية</button>
            <button onclick="navigate('scripts')" class="nav-btn">نشر سكربت</button>
            <button onclick="navigate('contact')" class="nav-btn">اتصل بنا</button>
        </nav>
    </header>

    <main id="home" class="content">
        <h2>مرحباً بك في مكتبة الكود العربي!</h2>
        <p>شارك أكوادك البرمجية بأمان واحترافية.</p>
    </main>

    <main id="scripts" class="content" style="display: none;">
        <h2>نشر سكربت جديد</h2>
        <form id="scriptForm">
            <input type="text" id="scriptTitle" placeholder="عنوان السكربت" required>
            <textarea id="scriptContent" placeholder="أدخل السكربت هنا..." required></textarea>
            <input type="text" id="imageLink" placeholder="أدخل رابط الصورة هنا (اختياري)">
            <button type="submit" class="submit-btn">نشر السكربت</button>
        </form>
        <div id="scriptsList">
            <p id="noScriptsMsg">لا توجد سكربتات منشورة بعد.</p>
        </div>
        <div id="scriptImage" style="display: none;">
            <img id="imagePreview" src="" alt="صورة السكربت" width="200">
        </div>
    </main>

    <main id="contact" class="content" style="display: none;">
        <h2>تواصل معنا</h2>
        <p>
            <a href="https://instagram.com/ntlk.afan" target="_blank">
                <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram" width="30">
                ntlk.afan
            </a>
        </p>
    </main>

    <footer>
        <p>© 2025 مكتبة الكود العربي - جميع الحقوق محفوظة</p>
    </footer>

    <script>
        document.getElementById('scriptForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const imageLink = document.getElementById('imageLink').value;
            if (imageLink) {
                // هنا نستخدم الرابط الصحيح مع ?raw=true لعرض الصورة
                const imageUrl = imageLink.includes('raw=true') ? imageLink : imageLink + '?raw=true';
                document.getElementById('imagePreview').src = imageUrl;
                document.getElementById('scriptImage').style.display = 'block';
            } else {
                document.getElementById('scriptImage').style.display = 'none';
            }

            // إضافة السكربت إلى قائمة السكربتات المنشورة
            const scriptTitle = document.getElementById('scriptTitle').value;
            const scriptContent = document.getElementById('scriptContent').value;
            const scriptList = document.getElementById('scriptsList');

            const scriptDiv = document.createElement('div');
            scriptDiv.innerHTML = `<h3>${scriptTitle}</h3><p>${scriptContent}</p>`;
            scriptList.appendChild(scriptDiv);
            
            document.getElementById('scriptForm').reset();
        });
    </script>
</body>
</html>
